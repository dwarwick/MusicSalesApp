@page "/forgot-password"
@inherits ForgotPasswordModel

<PageTitle>Forgot Password</PageTitle>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <SfCard>
                <CardHeader Title="Forgot Password" />
                <CardContent>
                    @if (isSubmitted)
                    {
                        <SfMessage Severity="MessageSeverity.Success">
                            <h4>Check Your Email</h4>
                            <p>If an account exists with the email address you provided, you will receive a password reset email shortly.</p>
                            <p>The link will expire in <strong>10 minutes</strong>.</p>
                        </SfMessage>
                        <div class="mt-3 text-center">
                            <SfButton OnClick="@(() => NavigationManager.NavigateTo("/login"))" IsPrimary="true" Content="Return to Login" CssClass="e-btn e-primary" />
                        </div>
                    }
                    else
                    {
                        @if (!string.IsNullOrEmpty(errorMessage))
                        {
                            <SfMessage Severity="MessageSeverity.Error">@errorMessage</SfMessage>
                        }

                        <p class="text-muted mb-4">Enter your email address and we'll send you a link to reset your password.</p>

                        <EditForm Model="this" OnValidSubmit="HandleSubmit">
                            <DataAnnotationsValidator />

                            <div class="mb-3">
                                <label for="email" class="e-label">Email Address</label>
                                <SfTextBox @bind-Value="Email" ID="email" Placeholder="Enter your email address" CssClass="e-outline" HtmlAttributes="@(new Dictionary<string, object> { { "required", "required" } })" />
                                <ValidationMessage For="@(() => Email)" />
                            </div>

                            <div class="d-grid">
                                <SfButton Type="ButtonType.Submit" IsPrimary="true" Disabled="@isSubmitting" Content="@(isSubmitting ? "Sending..." : "Send Reset Link")" CssClass="e-btn e-primary" />
                            </div>
                        </EditForm>
                    }
                </CardContent>
            </SfCard>
            <div class="mt-3 text-center">
                <a href="/login">Back to Login</a>
            </div>
        </div>
    </div>
</div>
